{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"C:\\\\Users\\\\Guillaume\\\\Code\\\\e-commerce\\\\admin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/defineProperty\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _HttpError = _interopRequireDefault(require(\"ra-core/lib/util/HttpError\"));\n\nvar _fetchJsonLd = _interopRequireDefault(require(\"@api-platform/api-doc-parser/lib/hydra/fetchJsonLd\"));\n\nvar _parseHydraDocumentation = require(\"@api-platform/api-doc-parser/lib/hydra/parseHydraDocumentation\");\n\nvar _jsonld = require(\"jsonld\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * Sends HTTP requests to a Hydra API.\n *\n * Adapted from react-admin\n *\n * @copyright Kévin Dunglas\n *\n * @param {string} url\n * @param {object} options\n * @return {object}\n */\n\n\nvar _default = function _default(url) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var requestHeaders = options.headers || new Headers();\n\n  if (options.user && options.user.authenticated && options.user.token) {\n    requestHeaders.set('Authorization', options.user.token);\n  }\n\n  return (0, _fetchJsonLd.default)(url, _objectSpread({}, options, {\n    headers: requestHeaders\n  })).then(function (data) {\n    var status = data.response.status;\n\n    if (status < 200 || status >= 300) {\n      return _jsonld.promises.expand(data.body, {\n        base: (0, _parseHydraDocumentation.getDocumentationUrlFromHeaders)(data.response.headers)\n      }).then(function (json) {\n        return Promise.reject(new _HttpError.default(json[0]['http://www.w3.org/ns/hydra/core#description'][0]['@value'], status));\n      }).catch(function (e) {\n        if (e.hasOwnProperty('body')) {\n          return Promise.reject(e);\n        }\n\n        return Promise.reject(new _HttpError.default(data.response.statusText, status));\n      });\n    }\n\n    return {\n      status: status,\n      headers: data.response.headers,\n      json: data.body\n    };\n  });\n};\n\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/Guillaume/Code/e-commerce/admin/node_modules/@api-platform/admin/lib/hydra/fetchHydra.js"],"names":["Object","defineProperty","exports","value","default","_HttpError","_interopRequireDefault","require","_fetchJsonLd","_parseHydraDocumentation","_jsonld","obj","__esModule","_default","url","options","requestHeaders","headers","Headers","user","authenticated","token","set","then","data","status","response","promises","expand","body","base","getDocumentationUrlFromHeaders","json","Promise","reject","catch","e","hasOwnProperty","statusText"],"mappings":"AAAA;;;;;;;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,UAAU,GAAGC,sBAAsB,CAACC,OAAO,CAAC,4BAAD,CAAR,CAAvC;;AAEA,IAAIC,YAAY,GAAGF,sBAAsB,CAACC,OAAO,CAAC,oDAAD,CAAR,CAAzC;;AAEA,IAAIE,wBAAwB,GAAGF,OAAO,CAAC,gEAAD,CAAtC;;AAEA,IAAIG,OAAO,GAAGH,OAAO,CAAC,QAAD,CAArB;;AAEA,SAASD,sBAAT,CAAgCK,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEP,IAAAA,OAAO,EAAEO;AAAX,GAArC;AAAwD;AAE/F;;;;;;;;;;;;;AAWA,IAAIE,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD,EAAuB;AAAA,MAAjBC,OAAiB,uEAAP,EAAO;AACpC,MAAMC,cAAc,GAAGD,OAAO,CAACE,OAAR,IAAmB,IAAIC,OAAJ,EAA1C;;AAEA,MAAIH,OAAO,CAACI,IAAR,IAAgBJ,OAAO,CAACI,IAAR,CAAaC,aAA7B,IAA8CL,OAAO,CAACI,IAAR,CAAaE,KAA/D,EAAsE;AACpEL,IAAAA,cAAc,CAACM,GAAf,CAAmB,eAAnB,EAAoCP,OAAO,CAACI,IAAR,CAAaE,KAAjD;AACD;;AAED,SAAO,CAAC,GAAGb,YAAY,CAACJ,OAAjB,EAA0BU,GAA1B,oBAAoCC,OAApC;AACLE,IAAAA,OAAO,EAAED;AADJ,MAEJO,IAFI,CAEC,UAAAC,IAAI,EAAI;AACd,QAAMC,MAAM,GAAGD,IAAI,CAACE,QAAL,CAAcD,MAA7B;;AAEA,QAAIA,MAAM,GAAG,GAAT,IAAgBA,MAAM,IAAI,GAA9B,EAAmC;AACjC,aAAOf,OAAO,CAACiB,QAAR,CAAiBC,MAAjB,CAAwBJ,IAAI,CAACK,IAA7B,EAAmC;AACxCC,QAAAA,IAAI,EAAE,CAAC,GAAGrB,wBAAwB,CAACsB,8BAA7B,EAA6DP,IAAI,CAACE,QAAL,CAAcT,OAA3E;AADkC,OAAnC,EAEJM,IAFI,CAEC,UAAAS,IAAI,EAAI;AACd,eAAOC,OAAO,CAACC,MAAR,CAAe,IAAI7B,UAAU,CAACD,OAAf,CAAuB4B,IAAI,CAAC,CAAD,CAAJ,CAAQ,6CAAR,EAAuD,CAAvD,EAA0D,QAA1D,CAAvB,EAA4FP,MAA5F,CAAf,CAAP;AACD,OAJM,EAIJU,KAJI,CAIE,UAAAC,CAAC,EAAI;AACZ,YAAIA,CAAC,CAACC,cAAF,CAAiB,MAAjB,CAAJ,EAA8B;AAC5B,iBAAOJ,OAAO,CAACC,MAAR,CAAeE,CAAf,CAAP;AACD;;AAED,eAAOH,OAAO,CAACC,MAAR,CAAe,IAAI7B,UAAU,CAACD,OAAf,CAAuBoB,IAAI,CAACE,QAAL,CAAcY,UAArC,EAAiDb,MAAjD,CAAf,CAAP;AACD,OAVM,CAAP;AAWD;;AAED,WAAO;AACLA,MAAAA,MAAM,EAAEA,MADH;AAELR,MAAAA,OAAO,EAAEO,IAAI,CAACE,QAAL,CAAcT,OAFlB;AAGLe,MAAAA,IAAI,EAAER,IAAI,CAACK;AAHN,KAAP;AAKD,GAxBM,CAAP;AAyBD,CAhCD;;AAkCA3B,OAAO,CAACE,OAAR,GAAkBS,QAAlB","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _HttpError = _interopRequireDefault(require(\"ra-core/lib/util/HttpError\"));\n\nvar _fetchJsonLd = _interopRequireDefault(require(\"@api-platform/api-doc-parser/lib/hydra/fetchJsonLd\"));\n\nvar _parseHydraDocumentation = require(\"@api-platform/api-doc-parser/lib/hydra/parseHydraDocumentation\");\n\nvar _jsonld = require(\"jsonld\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Sends HTTP requests to a Hydra API.\n *\n * Adapted from react-admin\n *\n * @copyright Kévin Dunglas\n *\n * @param {string} url\n * @param {object} options\n * @return {object}\n */\nvar _default = (url, options = {}) => {\n  const requestHeaders = options.headers || new Headers();\n\n  if (options.user && options.user.authenticated && options.user.token) {\n    requestHeaders.set('Authorization', options.user.token);\n  }\n\n  return (0, _fetchJsonLd.default)(url, { ...options,\n    headers: requestHeaders\n  }).then(data => {\n    const status = data.response.status;\n\n    if (status < 200 || status >= 300) {\n      return _jsonld.promises.expand(data.body, {\n        base: (0, _parseHydraDocumentation.getDocumentationUrlFromHeaders)(data.response.headers)\n      }).then(json => {\n        return Promise.reject(new _HttpError.default(json[0]['http://www.w3.org/ns/hydra/core#description'][0]['@value'], status));\n      }).catch(e => {\n        if (e.hasOwnProperty('body')) {\n          return Promise.reject(e);\n        }\n\n        return Promise.reject(new _HttpError.default(data.response.statusText, status));\n      });\n    }\n\n    return {\n      status: status,\n      headers: data.response.headers,\n      json: data.body\n    };\n  });\n};\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}